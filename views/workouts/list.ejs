<%- include('../partials/header', { title: 'My Workouts' }) %>

<h2>My Workouts</h2>

<p><a class="btn" href="/workouts/add">Add workout</a></p>

<table class="table">
  <thead>
    <tr>
      <th>Date</th>
      <th>Type</th>
      <th>Duration (min)</th>
      <th>Intensity</th>
      <th>Calories</th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <% if (!workouts.length) { %>
      <tr><td colspan="6">No workouts yet.</td></tr>
    <% } else { %>
      <% workouts.forEach(w => { %>
        <tr>
          <td><%= w.date.toISOString().slice(0, 10) %></td>
          <td><%= w.type %></td>
          <td><%= w.duration_min %></td>
          <td><%= w.intensity %></td>
          <td><%= w.calories || '-' %></td>
          <td>
            <a href="/workouts/<%= w.id %>">View</a> |
            <a href="/workouts/<%= w.id %>/edit">Edit</a> |
            <form action="/workouts/<%= w.id %>/delete" method="post" class="inline-form"
                  onsubmit="return confirm('Delete this workout?');">
              <button type="submit">Delete</button>
            </form>
          </td>
        </tr>
      <% }) %>
    <% } %>
  </tbody>
</table>

<% if (totalPages > 1) { %>
  <nav class="pagination">
    <% for (let p = 1; p <= totalPages; p++) { %>
      <% if (p === page) { %>
        <span class="page current"><%= p %></span>
      <% } else { %>
        <a class="page" href="/workouts?page=<%= p %>"><%= p %></a>
      <% } %>
    <% } %>
  </nav>
<% } %>

<%- include('../partials/footer') %>
