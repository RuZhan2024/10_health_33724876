<%- include('../partials/header', { pageTitle: pageTitle || formTitle }) %>

<section class="workouts-form">
  <h2><%= formTitle %></h2>

  <form action="<%= formAction %>" method="POST">
    <div class="form-group">
      <label for="workout_date">Date</label>
      <input
        type="date"
        id="workout_date"
        name="workout_date"
        value="<%= workout.workout_date || '' %>"
      />
      <% if (errors.workout_date) { %>
        <div class="error"><%= errors.workout_date.msg %></div>
      <% } %>
    </div>

    <div class="form-group">
      <label for="workout_type_id">Workout type</label>
      <select id="workout_type_id" name="workout_type_id">
        <option value="">Select a type</option>
        <% workoutTypes.forEach(t => { %>
          <option
            value="<%= t.id %>"
            <%= String(workout.workout_type_id) === String(t.id) ? 'selected' : '' %>
          >
            <%= t.name %>
          </option>
        <% }) %>
      </select>
      <% if (errors.workout_type_id) { %>
        <div class="error"><%= errors.workout_type_id.msg %></div>
      <% } %>
    </div>

    <div class="form-group">
      <label for="duration_minutes">Duration (minutes)</label>
      <input
        type="number"
        id="duration_minutes"
        name="duration_minutes"
        min="1"
        value="<%= workout.duration_minutes %>"
      />
      <% if (errors.duration_minutes) { %>
        <div class="error"><%= errors.duration_minutes.msg %></div>
      <% } %>
    </div>

    <div class="form-group">
      <label for="intensity">Intensity</label>
      <select id="intensity" name="intensity">
        <option value="low" <%= workout.intensity === 'low' ? 'selected' : '' %>>Low</option>
        <option value="medium" <%= workout.intensity === 'medium' ? 'selected' : '' %>>Medium</option>
        <option value="high" <%= workout.intensity === 'high' ? 'selected' : '' %>>High</option>
      </select>
      <% if (errors.intensity) { %>
        <div class="error"><%= errors.intensity.msg %></div>
      <% } %>
    </div>

    <div class="form-group">
      <label for="notes">Notes (optional)</label>
      <textarea id="notes" name="notes" rows="3"><%= workout.notes || '' %></textarea>
    </div>

    <button type="submit" class="btn">
      Save
    </button>
  </form>
</section>

<%- include('../partials/footer') %>
