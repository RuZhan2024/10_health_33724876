<%- include('../partials/header', { pageTitle: pageTitle || formTitle }) %>

<section class="metrics-form">
  <h2><%= formTitle %></h2>

  <form action="<%= formAction %>" method="POST">
    <div class="form-group">
      <label for="metric_date">Date</label>
      <input
        type="date"
        id="metric_date"
        name="metric_date"
        value="<%= metric.metric_date || '' %>"
      />
      <% if (errors.metric_date) { %>
        <div class="error"><%= errors.metric_date.msg %></div>
      <% } %>
    </div>

    <div class="form-group">
      <label for="metric_type_id">Metric type</label>
      <select id="metric_type_id" name="metric_type_id">
        <option value="">Select a type</option>
        <% metricTypes.forEach(t => { %>
          <option
            value="<%= t.id %>"
            <%= String(metric.metric_type_id) === String(t.id) ? 'selected' : '' %>
          >
            <%= t.name %>
          </option>
        <% }) %>
      </select>
      <% if (errors.metric_type_id) { %>
        <div class="error"><%= errors.metric_type_id.msg %></div>
      <% } %>
    </div>

    <div class="form-group">
      <label for="value">Value</label>
      <input
        type="number"
        step="0.01"
        id="value"
        name="value"
        value="<%= metric.value %>"
      />
      <% if (errors.value) { %>
        <div class="error"><%= errors.value.msg %></div>
      <% } %>
    </div>

    <div class="form-group">
      <label for="unit">Unit (optional)</label>
      <input
        type="text"
        id="unit"
        name="unit"
        value="<%= metric.unit || '' %>"
        placeholder="Leave blank to use default unit"
      />
    </div>

    <div class="form-group">
      <label for="notes">Notes (optional)</label>
      <textarea id="notes" name="notes" rows="3"><%= metric.notes || '' %></textarea>
    </div>

    <button type="submit" class="btn">
      Save
    </button>
  </form>
</section>

<%- include('../partials/footer') %>
