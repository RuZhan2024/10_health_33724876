<%- include('../partials/header', { title: 'My Health Metrics' }) %>

<h2>My Health Metrics</h2>

<p><a class="btn" href="/metrics/add">Add metric</a></p>

<table class="table">
  <thead>
    <tr>
      <th>Date</th>
      <th>Weight (kg)</th>
      <th>Steps</th>
      <th>BP (sys/dia)</th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <% if (!metrics.length) { %>
      <tr><td colspan="5">No metrics yet.</td></tr>
    <% } else { %>
      <% metrics.forEach(m => { %>
        <tr>
          <td><%= m.date.toISOString().slice(0, 10) %></td>
          <td><%= m.weight_kg || '-' %></td>
          <td><%= m.steps || '-' %></td>
          <td>
            <% if (m.bp_systolic && m.bp_diastolic) { %>
              <%= m.bp_systolic %>/<%= m.bp_diastolic %>
            <% } else { %>
              -
            <% } %>
          </td>
          <td>
            <a href="/metrics/<%= m.id %>">View</a> |
            <a href="/metrics/<%= m.id %>/edit">Edit</a> |
            <form action="/metrics/<%= m.id %>/delete" method="post" class="inline-form"
                  onsubmit="return confirm('Delete this metric?');">
              <button type="submit">Delete</button>
            </form>
          </td>
        </tr>
      <% }) %>
    <% } %>
  </tbody>
</table>

<%- include('../partials/footer') %>
